{"version":3,"file":"static/webpack/static/development/pages/02-colocando-em-pratica.js.c2541baa18cfaa9619f4.hot-update.js","sources":["webpack:///./components/Pages/HistoryCard.js"],"sourcesContent":["import React, { Component } from 'react'\nimport classNames from 'classnames'\nimport ComponentList from 'components/Common/ComponentList'\nimport Icon from 'components/Common/Icon'\n\nexport default class HistoryCard extends Component {\n  state = {\n    active: false,\n    height: 0,\n    isPlaying: false,\n    position: 0,\n    duration: 0,\n    currentTime: 0,\n    audio: ''\n  }\n\n  _cardBody = React.createRef()\n\n  _audio = React.createRef()\n\n  controlPlaying = () => {\n    this.setState({ duration: this._audio.current.duration })\n    if (!this.state.active) return this.openCard()\n    return this.audioToggle()\n  }\n\n  updateTime = ({ target }) => {\n    this.setState({ currentTime: target.currentTime })\n  }\n\n  openCard = () => {\n    const { clientHeight } = this._cardBody.current.firstChild\n    this.audioPlay()\n    return this.setState({ active: true, height: clientHeight })\n  }\n\n  audioToggle = () => {\n    if (this.state.isPlaying) return this.audioPause()\n    return this.audioPlay()\n  }\n\n  audioPlay = () => {\n    this._audio.current.play()\n    this.setState({ isPlaying: true })\n  }\n\n  audioPause = () => {\n    this._audio.current.pause()\n    this.setState({ isPlaying: false })\n  }\n\n  setAudioSrc = () => {\n    this._audio.current.src = this.soundSrc\n    this._audio.current.currentTime = 0\n    setTimeout(() => {\n      const duration = this._audio.current.duration\n      this.setState({ duration: this._audio.current.duration, isPlaying: true })\n      this._audio.current.play()\n    }, 100)\n  }\n\n  setPosition = position => {\n    this.setState({ position, currentTime: 0 })\n    this.setAudioSrc()\n  }\n\n  get soundSrc() {\n    const { playlist } = this.props\n    if (!playlist) return null\n    const { src } = playlist[this.state.position]\n    return src\n  }\n\n  render = () => (\n    <div className={classNames('PV8 HistoryCard', {\n        Active: this.state.active,\n      })}>\n      <div className=\"Card BGWhite\">\n        <CardHead\n          onClick={this.controlPlaying}\n          title={this.props.title}\n          isPlaying={this.state.isPlaying} />\n        {this.state.active && (\n          <ProgressBar\n            currentTime={this.state.currentTime}\n            duration={this.state.duration} />\n        )}\n        <audio ref={this._audio} onTimeUpdate={this.updateTime}>\n          <source src={this.soundSrc}/>\n        </audio>\n        <div\n          className=\"CardBodyWrapper\"\n          ref={this._cardBody}\n          style={{ height: this.state.height }}>\n          <CardBody\n            playlist={this.props.playlist}\n            position={this.state.position}\n            setPosition={this.setPosition} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst CardHead = ({ title, play, isPlaying, onClick }) => (\n  <div className=\"CardHead Flex JCSpaceBetween\" onClick={onClick}>\n    <div className=\"FS4x\">\n      <div className=\"ColorGray Saira SairaLight MB8\">\n        Conheça a história\n      </div>\n      <div className=\"ColorPrimary Saira SairaStrong Uppercase\">\n        {title}\n      </div>\n    </div>\n    <div className=\"Pointer\">\n      <img src={`/static/img/ic_playlist_${!isPlaying ? 'play' : 'pause'}_24px.svg`} />\n    </div>\n  </div>\n)\n\nconst ProgressBar = ({ currentTime = 0, duration = 1 }) => {\n  const progress = Math.round(currentTime*100/duration) || 0\n  return (\n    <div className=\"W100 ProgressBar\">\n      <div className=\"BGPrimary\" style={{ height: 5, width: `${progress}%` }} />\n    </div>\n  )\n}\n\nconst CardBody = ({ playlist = [], position, setPosition }) => (\n  <div className=\"CardBody\">\n    <ComponentList component={Sound} componentProps={{ position, setPosition }}>\n      {playlist}\n    </ComponentList>\n  </div>\n)\n\nconst Sound = ({ title, src, time, index, position, setPosition }) => {\n  const isSelected = index === position\n  const play = {\n    active: '/static/img/ic_play_circle_filled_24px.svg',\n    disable: '/static/img/ic_play_circle_outline_24px.svg',\n  }\n  const icon = isSelected ? play.active : play.disable\n  return (\n    <div\n      onClick={() => setPosition(index)}\n      className={classNames(\n        'Sound Flex AICenter PV8 JCSpaceBetween Saira TextLeft Pointer',\n        { ColorGray: !isSelected, ColorPrimary: isSelected }\n    )}>\n      <div className=\"ImageBody\" style={{ backgroundImage: `url(${icon})` }} />\n      <div className=\"W100 PH16\">{title}</div>\n      <div>{time}</div>\n        <audio id=\"audio\" preload=\"auto\">\n          <source src={src} type=\"audio/mp3\" />\n        </audio>\n    </div>\n  )\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAQA;AAAA;AACA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AArBA;AACA;;;;;;AARA;AAAA;AAEA;AAFA;AAIA;AACA;;;;AAlEA;AACA;AADA;AACA;AAkGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAXA;AACA;AAeA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AACA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;A","sourceRoot":""}